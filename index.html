<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="c3.min.css" rel="stylesheet" type="text/css">
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="c3.min.js"></script>
    <script src="sweetalert2.min.js"></script>
    <script src="croppie.js"></script>
    <link rel="stylesheet" href="croppie.css" />
    <link rel="stylesheet" href="sweetalert2.min.css">
    <link rel="stylesheet" type="text/css" href="all.css">
    <title>台灣自然美景爭霸戰</title>
</head>
<div class="wrap">
    <header>
        <div class="headerTitle">
            <h1 class="title">台灣自然美景爭霸戰</h1>
        </div>
        <a class="sign enlarge" onclick="newPost()">我要投稿</a>
    </header>
    <content>
        <div class="nowVote">
            <h2 class="title">目前戰績</h2>
            <div id="votingStatus"></div>
        </div>
        <div class="voteArea">
            <h2 class="title">參賽作品</h2>
            <ul class="list">
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="showInfo()">
                        <div class="voteInfo">
                            <img src="img/test.jpg">
                            <div class="detail">
                                <p class="workName">作品名稱</p>
                            </div>
                        </div>
                    </a>
                    <div class="voteNow">
                        <a class="voteThis" href="#" onclick="voteThis()">我要投票</a>
                        <span>總票數: 80</span>
                    </div>
                </li>
            </ul>
        </div>
        <div class="clear"></div>
        <div class="page">
            <ul class="pageList">
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#">6</a></li>
            </ul>
        </div>
    </content>
    <hr/>
    <footer>
        <p>Copyright© 2017 國立高雄大學資訊管理學系 All Right Reserved.</p>
        <p><a class="footerLink" href="http://www.im.nuk.edu.tw" target="_blank">國立高雄大學資訊管理學系</a> | <a class="footerLink" href="https://www.facebook.com/imgroupisgood/" target="_blank">Facebook 粉絲專頁</a></p>
    </footer>
</div>
<script type="text/javascript">
var newImageFile;
var chart = c3.generate({
    bindto: '#votingStatus',
    data: {
        columns: [
            ['data1', 80, 70, 50, 30, 10, 5],
        ],
        types: {
            data1: 'bar',
        }
    },
    axis: {
        rotated: true
    }
});

function showInfo() {
    swal({
        title: "",
        html: '<div>\
            <img src="img/test_full.jpg" width="100%">\
            <p id="workID">作品編號: 001</p>\
            <p id="workName">作品名稱: 大崙山</p>\
            <p>作品描述:</p>\
            <p id="workDicpt">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>\
            <a class="voteThis right enlarge" href="#" onclick="voteThis()">我要投票</a>\
        </div>',
        showConfirmButton: false,
        allowEscapeKey: false,
        width: 720,
        padding: 50
    })
}

function newPost() {
    swal({
        title: '先上傳圖片',
        input: 'file',
        inputAttributes: {
            accept: 'image/*'
        }
    }).then(function(file) {
        var reader = new FileReader
        reader.onload = function(e) {
            var html = '<form action="" enctype="multipart/form-data" >\
                    <table class="newPost">\
                        <input type="hidden" name="imgCode" value="'+e.target.result+'">\
                        <tr>\
                            <td colspan="2" id="previewArea"><img width="100%" id="preview" src="'+e.target.result+'"/></td>\
                        </tr>\
                        <tr>\
                            <td>作品名稱</td>\
                            <td><input type="text" name="postTitle" maxlength="10"></td>\
                        </tr>\
                        <tr>\
                            <td>作品描述</td>\
                            <td><textarea rows="5" name="postDecpt" class="decpt"></textarea></td>\
                        </tr>\
                        <tr>\
                            <td colspan="2"><input type="submit" value="投稿"></td>\
                        </tr>\
                    </table>\
                </form>';
            swal({
                title: "加入戰局",
                html: html,
                showConfirmButton: false,
                allowEscapeKey: false,
                width: 540,
                padding: 50,
            })
            newImageFile = $('#preview').croppie({
                viewport: {
                    width: 400,
                    height: 400,
                    type: 'square'
                },
                boundary: {
                    width: 400,
                    height: 400
                }
            });
        }
        reader.readAsDataURL(file)
    })
}

function createPost() {
    var html = '<form action="" enctype="multipart/form-data" >\
                    <table class="newPost">\
                        <tr>\
                            <td>作品名稱</td>\
                            <td><input type="text" name="postTitle" maxlength="10"></td>\
                        </tr>\
                        <tr>\
                            <td>作品描述</td>\
                            <td><textarea rows="5" name="postDecpt" class="decpt"></textarea></td>\
                        </tr>\
                        <tr>\
                            <td>上傳圖片</td>\
                            <td><input type="button" name="files[]" id="uploadImg" value="選擇照片" onclick="newImg(event)"></td>\
                        </tr>\
                        <tr>\
                            <td colspan="2" id="previewArea"></td>\
                        </tr>\
                        <tr>\
                            <td colspan="2"><input type="submit" value="投稿"></td>\
                        </tr>\
                    </table>\
                </form>';
    swal({
        title: "加入戰局",
        html: html,
        showConfirmButton: false,
        allowEscapeKey: false,
        width: 540,
        padding: 50
    });
    document.getElementById('uploadImg').addEventListener('change', newImg, false);
}
</script>

<body>
</body>

</html>
